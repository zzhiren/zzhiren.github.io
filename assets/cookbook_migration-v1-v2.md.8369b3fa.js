import{_ as s,o as n,c as a,a as l}from"./app.09b4d0c2.js";const A=JSON.parse('{"title":"Migrating from 0.x (v1) to v2","description":"","frontmatter":{},"headers":[{"level":2,"title":"Deprecations","slug":"deprecations","link":"#deprecations","children":[]},{"level":2,"title":"Breaking changes","slug":"breaking-changes","link":"#breaking-changes","children":[{"level":3,"title":"Generic Store type","slug":"generic-store-type","link":"#generic-store-type","children":[]}]},{"level":2,"title":"DefineStoreOptions for plugins","slug":"definestoreoptions-for-plugins","link":"#definestoreoptions-for-plugins","children":[]},{"level":2,"title":"PiniaStorePlugin was renamed","slug":"piniastoreplugin-was-renamed","link":"#piniastoreplugin-was-renamed","children":[]},{"level":2,"title":"@vue/composition-api version","slug":"vue-composition-api-version","link":"#vue-composition-api-version","children":[]},{"level":2,"title":"webpack 4 support","slug":"webpack-4-support","link":"#webpack-4-support","children":[]},{"level":2,"title":"Devtools","slug":"devtools","link":"#devtools","children":[]},{"level":2,"title":"Nuxt","slug":"nuxt","link":"#nuxt","children":[]}],"relativePath":"cookbook/migration-v1-v2.md"}'),p={name:"cookbook/migration-v1-v2.md"},o=l(`<h1 id="migrating-from-0-x-v1-to-v2" tabindex="-1">Migrating from 0.x (v1) to v2 <a class="header-anchor" href="#migrating-from-0-x-v1-to-v2" aria-hidden="true">#</a></h1><p>Starting at version <code>2.0.0-rc.4</code>, pinia supports both Vue 2 and Vue 3! This means, all new updates will be applied to this version 2 so both Vue 2 and Vue 3 users can benefit from it. If you are using Vue 3, this doesn&#39;t change anything for you as you were already using the rc and you can check <a href="https://github.com/vuejs/pinia/blob/v2/packages/pinia/CHANGELOG.md" target="_blank" rel="noreferrer">the CHANGELOG</a> for a detailed explanation of everything that changed. Otherwise, <strong>this guide is for you</strong>!</p><h2 id="deprecations" tabindex="-1">Deprecations <a class="header-anchor" href="#deprecations" aria-hidden="true">#</a></h2><p>Let&#39;s take a look at all the changes you need to apply to your code. First, make sure you are already running the latest 0.x version to see any deprecations:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">npm </span><span style="color:#E7EE98;">i</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">pinia@^0.x.x</span><span style="color:#DEE492;">&#39;</span></span>
<span class="line"><span style="color:#7B7F8B;"># or with yarn</span></span>
<span class="line"><span style="color:#F6F6F4;">yarn </span><span style="color:#E7EE98;">add</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">pinia@^0.x.x</span><span style="color:#DEE492;">&#39;</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">npm</span><span style="color:#393A34;"> </span><span style="color:#B56959;">i</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">pinia@^0.x.x</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"><span style="color:#A0ADA0;"># or with yarn</span></span>
<span class="line"><span style="color:#59873A;">yarn</span><span style="color:#393A34;"> </span><span style="color:#B56959;">add</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">pinia@^0.x.x</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>If you are using ESLint, consider using <a href="https://github.com/gund/eslint-plugin-deprecation" target="_blank" rel="noreferrer">this plugin</a> to find all deprecated usages. Otherwise, you should be able to see them as they appear crossed. These are the APIs that were deprecated that were removed:</p><ul><li><code>createStore()</code> becomes <code>defineStore()</code></li><li>In subscriptions, <code>storeName</code> becomes <code>storeId</code></li><li><code>PiniaPlugin</code> was renamed <code>PiniaVuePlugin</code> (Pinia plugin for Vue 2)</li><li><code>$subscribe()</code> no longer accepts a <em>boolean</em> as second parameter, pass an object with <code>detached: true</code> instead.</li><li>Pinia plugins no longer directly receive the <code>id</code> of the store. Use <code>store.$id</code> instead.</li></ul><h2 id="breaking-changes" tabindex="-1">Breaking changes <a class="header-anchor" href="#breaking-changes" aria-hidden="true">#</a></h2><p>After removing these, you can upgrade to v2 with:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">npm </span><span style="color:#E7EE98;">i</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">pinia@^2.x.x</span><span style="color:#DEE492;">&#39;</span></span>
<span class="line"><span style="color:#7B7F8B;"># or with yarn</span></span>
<span class="line"><span style="color:#F6F6F4;">yarn </span><span style="color:#E7EE98;">add</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">pinia@^2.x.x</span><span style="color:#DEE492;">&#39;</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">npm</span><span style="color:#393A34;"> </span><span style="color:#B56959;">i</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">pinia@^2.x.x</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"><span style="color:#A0ADA0;"># or with yarn</span></span>
<span class="line"><span style="color:#59873A;">yarn</span><span style="color:#393A34;"> </span><span style="color:#B56959;">add</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">pinia@^2.x.x</span><span style="color:#B56959AA;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>And start updating your code.</p><h3 id="generic-store-type" tabindex="-1">Generic Store type <a class="header-anchor" href="#generic-store-type" aria-hidden="true">#</a></h3><p>Added in <a href="https://github.com/vuejs/pinia/blob/v2/packages/pinia/CHANGELOG.md#200-rc0-2021-07-28" target="_blank" rel="noreferrer">2.0.0-rc.0</a></p><p>Replace any usage of the type <code>GenericStore</code> with <code>StoreGeneric</code>. This is the new generic store type that should accept any kind of store. If you were writing functions using the type <code>Store</code> without passing its generics (e.g. <code>Store&lt;Id, State, Getters, Actions&gt;</code>), you should also use <code>StoreGeneric</code> as the <code>Store</code> type without generics creates an empty store type.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dracula-soft has-diff vp-code-dark"><code><span class="line diff remove"><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">takeAnyStore</span><span style="color:#F6F6F4;">(</span><span style="color:#FFB86C;font-style:italic;">store</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Store</span><span style="color:#F6F6F4;">) {} </span></span>
<span class="line diff add"><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">takeAnyStore</span><span style="color:#F6F6F4;">(</span><span style="color:#FFB86C;font-style:italic;">store</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">StoreGeneric</span><span style="color:#F6F6F4;">) {} </span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">takeAnyStore</span><span style="color:#F6F6F4;">(</span><span style="color:#FFB86C;font-style:italic;">store</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">GenericStore</span><span style="color:#F6F6F4;">) {} </span></span>
<span class="line diff add"><span style="color:#F286C4;">function</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">takeAnyStore</span><span style="color:#F6F6F4;">(</span><span style="color:#FFB86C;font-style:italic;">store</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">StoreGeneric</span><span style="color:#F6F6F4;">) {} </span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light has-diff vp-code-light"><code><span class="line diff remove"><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#59873A;">takeAnyStore</span><span style="color:#999999;">(</span><span style="color:#B07D48;">store</span><span style="color:#999999;">: </span><span style="color:#2E808F;">Store</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{}</span><span style="color:#393A34;"> </span></span>
<span class="line diff add"><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#59873A;">takeAnyStore</span><span style="color:#999999;">(</span><span style="color:#B07D48;">store</span><span style="color:#999999;">: </span><span style="color:#2E808F;">StoreGeneric</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{}</span><span style="color:#393A34;"> </span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#59873A;">takeAnyStore</span><span style="color:#999999;">(</span><span style="color:#B07D48;">store</span><span style="color:#999999;">: </span><span style="color:#2E808F;">GenericStore</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{}</span><span style="color:#393A34;"> </span></span>
<span class="line diff add"><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#59873A;">takeAnyStore</span><span style="color:#999999;">(</span><span style="color:#B07D48;">store</span><span style="color:#999999;">: </span><span style="color:#2E808F;">StoreGeneric</span><span style="color:#999999;">)</span><span style="color:#393A34;"> </span><span style="color:#999999;">{}</span><span style="color:#393A34;"> </span></span>
<span class="line"></span></code></pre></div><h2 id="definestoreoptions-for-plugins" tabindex="-1"><code>DefineStoreOptions</code> for plugins <a class="header-anchor" href="#definestoreoptions-for-plugins" aria-hidden="true">#</a></h2><p>If you were writing plugins, using TypeScript, and extending the type <code>DefineStoreOptions</code> to add custom options, you should rename it to <code>DefineStoreOptionsBase</code>. This type will apply to both setup and options stores.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dracula-soft has-diff vp-code-dark"><code><span class="line"><span style="color:#F286C4;">declare</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">module</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">pinia</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line diff remove"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">interface</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">DefineStoreOptions</span><span style="color:#F6F6F4;">&lt;</span><span style="color:#FFB86C;font-style:italic;">S</span><span style="color:#F6F6F4;">, </span><span style="color:#FFB86C;font-style:italic;">Store</span><span style="color:#F6F6F4;">&gt; { </span></span>
<span class="line diff add"><span style="color:#F6F6F4;">  export interface DefineStoreOptionsBase</span><span style="color:#F286C4;">&lt;</span><span style="color:#F6F6F4;">S, Store</span><span style="color:#F286C4;">&gt;</span><span style="color:#F6F6F4;"> { </span></span>
<span class="line"><span style="color:#F6F6F4;">    debounce?</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">      [k </span><span style="color:#F286C4;">in</span><span style="color:#F6F6F4;"> keyof StoreActions</span><span style="color:#F286C4;">&lt;</span><span style="color:#F6F6F4;">Store</span><span style="color:#F286C4;">&gt;</span><span style="color:#F6F6F4;">]?</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> number</span></span>
<span class="line"><span style="color:#F6F6F4;">    }</span></span>
<span class="line"><span style="color:#F6F6F4;">  }</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light has-diff vp-code-light"><code><span class="line"><span style="color:#AB5959;">declare</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">module</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">pinia</span><span style="color:#B56959AA;">&#39;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line diff remove"><span style="color:#393A34;">  </span><span style="color:#1E754F;">export</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">interface</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">DefineStoreOptions</span><span style="color:#999999;">&lt;</span><span style="color:#2E808F;">S</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#2E808F;">Store</span><span style="color:#999999;">&gt;</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span></span>
<span class="line diff add"><span style="color:#393A34;">  </span><span style="color:#B07D48;">export</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">interface</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">DefineStoreOptionsBase</span><span style="color:#999999;">&lt;</span><span style="color:#B07D48;">S</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">Store</span><span style="color:#999999;">&gt; { </span></span>
<span class="line"><span style="color:#999999;">    debounce?: {</span></span>
<span class="line"><span style="color:#999999;">      [</span><span style="color:#B07D48;">k</span><span style="color:#998418;"> </span><span style="color:#AB5959;">in</span><span style="color:#998418;"> </span><span style="color:#B07D48;">keyof</span><span style="color:#998418;"> </span><span style="color:#B07D48;">StoreActions</span><span style="color:#999999;">&lt;</span><span style="color:#B07D48;">Store</span><span style="color:#999999;">&gt;]</span><span style="color:#998418;">?</span><span style="color:#999999;">: </span><span style="color:#B07D48;">number</span></span>
<span class="line"><span style="color:#999999;">    }</span></span>
<span class="line"><span style="color:#999999;">  }</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="piniastoreplugin-was-renamed" tabindex="-1"><code>PiniaStorePlugin</code> was renamed <a class="header-anchor" href="#piniastoreplugin-was-renamed" aria-hidden="true">#</a></h2><p>The type <code>PiniaStorePlugin</code> was renamed to <code>PiniaPlugin</code>.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dracula-soft has-diff vp-code-dark"><code><span class="line diff remove"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> { PiniaStorePlugin } </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">pinia</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;"> </span></span>
<span class="line diff add"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> { PiniaPlugin } </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">pinia</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;"> </span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">piniaPlugin</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">PiniaStorePlugin</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> () </span><span style="color:#F286C4;">=&gt;</span><span style="color:#F6F6F4;"> { </span></span>
<span class="line diff add"><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">piniaPlugin</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">PiniaPlugin</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> () </span><span style="color:#F286C4;">=&gt;</span><span style="color:#F6F6F4;"> { </span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// ...</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light has-diff vp-code-light"><code><span class="line diff remove"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">PiniaStorePlugin</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">pinia</span><span style="color:#B56959AA;">&#39;</span><span style="color:#393A34;"> </span></span>
<span class="line diff add"><span style="color:#1E754F;">import</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span><span style="color:#393A34;"> </span><span style="color:#B07D48;">PiniaPlugin</span><span style="color:#393A34;"> </span><span style="color:#999999;">}</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">from</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">pinia</span><span style="color:#B56959AA;">&#39;</span><span style="color:#393A34;"> </span></span>
<span class="line"></span>
<span class="line diff remove"><span style="color:#AB5959;">const </span><span style="color:#59873A;">piniaPlugin</span><span style="color:#999999;">: </span><span style="color:#2E808F;">PiniaStorePlugin</span><span style="color:#999999;"> </span><span style="color:#AB5959;">= </span><span style="color:#999999;">()</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#AB5959;"> </span><span style="color:#999999;">{</span><span style="color:#AB5959;"> </span></span>
<span class="line diff add"><span style="color:#AB5959;">const </span><span style="color:#59873A;">piniaPlugin</span><span style="color:#999999;">: </span><span style="color:#2E808F;">PiniaPlugin</span><span style="color:#999999;"> </span><span style="color:#AB5959;">= </span><span style="color:#999999;">()</span><span style="color:#AB5959;"> </span><span style="color:#999999;">=&gt;</span><span style="color:#AB5959;"> </span><span style="color:#999999;">{</span><span style="color:#AB5959;"> </span></span>
<span class="line"><span style="color:#999999;">  </span><span style="color:#A0ADA0;">// ...</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><p><strong>Note this change can only be done after upgrading to the latest version of Pinia without deprecations</strong>.</p><h2 id="vue-composition-api-version" tabindex="-1"><code>@vue/composition-api</code> version <a class="header-anchor" href="#vue-composition-api-version" aria-hidden="true">#</a></h2><p>Since pinia now relies on <code>effectScope()</code>, you must use at least the version <code>1.1.0</code> of <code>@vue/composition-api</code>:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">npm </span><span style="color:#E7EE98;">i</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">@vue/composition-api@latest</span></span>
<span class="line"><span style="color:#7B7F8B;"># or with yarn</span></span>
<span class="line"><span style="color:#F6F6F4;">yarn </span><span style="color:#E7EE98;">add</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">@vue/composition-api@latest</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">npm</span><span style="color:#393A34;"> </span><span style="color:#B56959;">i</span><span style="color:#393A34;"> </span><span style="color:#B56959;">@vue/composition-api@latest</span></span>
<span class="line"><span style="color:#A0ADA0;"># or with yarn</span></span>
<span class="line"><span style="color:#59873A;">yarn</span><span style="color:#393A34;"> </span><span style="color:#B56959;">add</span><span style="color:#393A34;"> </span><span style="color:#B56959;">@vue/composition-api@latest</span></span>
<span class="line"></span></code></pre></div><h2 id="webpack-4-support" tabindex="-1">webpack 4 support <a class="header-anchor" href="#webpack-4-support" aria-hidden="true">#</a></h2><p>If you are using webpack 4 (Vue CLI uses webpack 4), you might encounter an error like this:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#f6f6f4;">ERROR  Failed to compile with 18 errors</span></span>
<span class="line"><span style="color:#f6f6f4;"></span></span>
<span class="line"><span style="color:#f6f6f4;"> error  in ./node_modules/pinia/dist/pinia.mjs</span></span>
<span class="line"><span style="color:#f6f6f4;"></span></span>
<span class="line"><span style="color:#f6f6f4;">Can&#39;t import the named export &#39;computed&#39; from non EcmaScript module (only default export is available)</span></span>
<span class="line"><span style="color:#f6f6f4;"></span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#393a34;">ERROR  Failed to compile with 18 errors</span></span>
<span class="line"><span style="color:#393a34;"></span></span>
<span class="line"><span style="color:#393a34;"> error  in ./node_modules/pinia/dist/pinia.mjs</span></span>
<span class="line"><span style="color:#393a34;"></span></span>
<span class="line"><span style="color:#393a34;">Can&#39;t import the named export &#39;computed&#39; from non EcmaScript module (only default export is available)</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>This is due to the modernization of dist files to support native ESM modules in Node.js. Files are now using the extension <code>.mjs</code> and <code>.cjs</code> to let Node benefit from this. To fix this issue you have two possibilities:</p><ul><li><p>If you are using Vue CLI 4.x, upgrade your dependencies. This should include the fix below.</p><ul><li><p>If upgrading is not possible for you, add this to your <code>vue.config.js</code>:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">// vue.config.js</span></span>
<span class="line"><span style="color:#97E1F1;font-style:italic;">module</span><span style="color:#F6F6F4;">.</span><span style="color:#97E1F1;font-style:italic;">exports</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">  configureWebpack</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    module</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">      rules</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> [</span></span>
<span class="line"><span style="color:#F6F6F4;">        {</span></span>
<span class="line"><span style="color:#F6F6F4;">          test</span><span style="color:#F286C4;">:</span><span style="color:#E7EE98;"> </span><span style="color:#EE6666;">/</span><span style="color:#E7EE98;">\\.mjs</span><span style="color:#F286C4;">$</span><span style="color:#EE6666;">/</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">          include</span><span style="color:#F286C4;">:</span><span style="color:#E7EE98;"> </span><span style="color:#EE6666;">/</span><span style="color:#E7EE98;">node_modules</span><span style="color:#EE6666;">/</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">          type</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">javascript/auto</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">        },</span></span>
<span class="line"><span style="color:#F6F6F4;">      ],</span></span>
<span class="line"><span style="color:#F6F6F4;">    },</span></span>
<span class="line"><span style="color:#F6F6F4;">  },</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// vue.config.js</span></span>
<span class="line"><span style="color:#998418;">module</span><span style="color:#999999;">.</span><span style="color:#998418;">exports</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">configureWebpack</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">module</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#998418;">rules</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">test</span><span style="color:#999999;">:</span><span style="color:#AB5E3F;"> </span><span style="color:#B56959AA;">/</span><span style="color:#BDA437;">\\.</span><span style="color:#AB5E3F;">mjs</span><span style="color:#1E754F;">$</span><span style="color:#B56959AA;">/</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">include</span><span style="color:#999999;">:</span><span style="color:#AB5E3F;"> </span><span style="color:#B56959AA;">/</span><span style="color:#AB5E3F;">node_modules</span><span style="color:#B56959AA;">/</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">javascript/auto</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div></li></ul></li><li><p>If you are manually handling webpack, you will have to let it know how to handle <code>.mjs</code> files:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">// webpack.config.js</span></span>
<span class="line"><span style="color:#97E1F1;font-style:italic;">module</span><span style="color:#F6F6F4;">.</span><span style="color:#97E1F1;font-style:italic;">exports</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">  module</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    rules</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> [</span></span>
<span class="line"><span style="color:#F6F6F4;">      {</span></span>
<span class="line"><span style="color:#F6F6F4;">        test</span><span style="color:#F286C4;">:</span><span style="color:#E7EE98;"> </span><span style="color:#EE6666;">/</span><span style="color:#E7EE98;">\\.mjs</span><span style="color:#F286C4;">$</span><span style="color:#EE6666;">/</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">        include</span><span style="color:#F286C4;">:</span><span style="color:#E7EE98;"> </span><span style="color:#EE6666;">/</span><span style="color:#E7EE98;">node_modules</span><span style="color:#EE6666;">/</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">        type</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">javascript/auto</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">      },</span></span>
<span class="line"><span style="color:#F6F6F4;">    ],</span></span>
<span class="line"><span style="color:#F6F6F4;">  },</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// webpack.config.js</span></span>
<span class="line"><span style="color:#998418;">module</span><span style="color:#999999;">.</span><span style="color:#998418;">exports</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">module</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">rules</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">test</span><span style="color:#999999;">:</span><span style="color:#AB5E3F;"> </span><span style="color:#B56959AA;">/</span><span style="color:#BDA437;">\\.</span><span style="color:#AB5E3F;">mjs</span><span style="color:#1E754F;">$</span><span style="color:#B56959AA;">/</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">include</span><span style="color:#999999;">:</span><span style="color:#AB5E3F;"> </span><span style="color:#B56959AA;">/</span><span style="color:#AB5E3F;">node_modules</span><span style="color:#B56959AA;">/</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">type</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">javascript/auto</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">},</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div></li></ul><h2 id="devtools" tabindex="-1">Devtools <a class="header-anchor" href="#devtools" aria-hidden="true">#</a></h2><p>Pinia v2 no longer hijacks Vue Devtools v5, it requires Vue Devtools v6. Find the download link on the <a href="https://devtools.vuejs.org/guide/installation.html#chrome" target="_blank" rel="noreferrer">Vue Devtools documentation</a> for the <strong>beta channel</strong> of the extension.</p><h2 id="nuxt" tabindex="-1">Nuxt <a class="header-anchor" href="#nuxt" aria-hidden="true">#</a></h2><p>If you are using Nuxt, pinia has now its own dedicated Nuxt package 🎉. Install it with:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki dracula-soft vp-code-dark"><code><span class="line"><span style="color:#F6F6F4;">npm </span><span style="color:#E7EE98;">i</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">@pinia/nuxt</span></span>
<span class="line"><span style="color:#7B7F8B;"># or with yarn</span></span>
<span class="line"><span style="color:#F6F6F4;">yarn </span><span style="color:#E7EE98;">add</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">@pinia/nuxt</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#59873A;">npm</span><span style="color:#393A34;"> </span><span style="color:#B56959;">i</span><span style="color:#393A34;"> </span><span style="color:#B56959;">@pinia/nuxt</span></span>
<span class="line"><span style="color:#A0ADA0;"># or with yarn</span></span>
<span class="line"><span style="color:#59873A;">yarn</span><span style="color:#393A34;"> </span><span style="color:#B56959;">add</span><span style="color:#393A34;"> </span><span style="color:#B56959;">@pinia/nuxt</span></span>
<span class="line"></span></code></pre></div><p>Also make sure to <strong>update your <code>@nuxtjs/composition-api</code> package</strong>.</p><p>Then adapt your <code>nuxt.config.js</code> and your <code>tsconfig.json</code> if you are using TypeScript:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki dracula-soft has-diff vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">// nuxt.config.js</span></span>
<span class="line"><span style="color:#97E1F1;font-style:italic;">module</span><span style="color:#F6F6F4;">.</span><span style="color:#97E1F1;font-style:italic;">exports</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">  buildModules: [</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">@nuxtjs/composition-api/module</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line diff remove"><span style="color:#F6F6F4;">    </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">pinia/nuxt</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">, </span></span>
<span class="line diff add"><span style="color:#F6F6F4;">    </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">@pinia/nuxt</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">, </span></span>
<span class="line"><span style="color:#F6F6F4;">  ],</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light has-diff vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// nuxt.config.js</span></span>
<span class="line"><span style="color:#998418;">module</span><span style="color:#999999;">.</span><span style="color:#998418;">exports</span><span style="color:#393A34;"> </span><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#59873A;">buildModules</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">@nuxtjs/composition-api/module</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span></span>
<span class="line diff remove"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">pinia/nuxt</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span></span>
<span class="line diff add"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&#39;</span><span style="color:#B56959;">@pinia/nuxt</span><span style="color:#B56959AA;">&#39;</span><span style="color:#999999;">,</span><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">],</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki dracula-soft has-diff vp-code-dark"><code><span class="line"><span style="color:#7B7F8B;">// tsconfig.json</span></span>
<span class="line"><span style="color:#F6F6F4;">{</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#97E2F2;">&quot;</span><span style="color:#97E1F1;">types</span><span style="color:#97E2F2;">&quot;</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> [</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#7B7F8B;">// ...</span></span>
<span class="line diff remove"><span style="color:#F6F6F4;">    </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">pinia/nuxt/types</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span></span>
<span class="line diff add"><span style="color:#F6F6F4;">    </span><span style="color:#DEE492;">&quot;</span><span style="color:#E7EE98;">@pinia/nuxt</span><span style="color:#DEE492;">&quot;</span><span style="color:#F6F6F4;"> </span></span>
<span class="line"><span style="color:#F6F6F4;">  ]</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vitesse-light has-diff vp-code-light"><code><span class="line"><span style="color:#A0ADA0;">// tsconfig.json</span></span>
<span class="line"><span style="color:#999999;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#B56959AA;">&quot;</span><span style="color:#998418;">types</span><span style="color:#B56959AA;">&quot;</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#999999;">[</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">// ...</span></span>
<span class="line diff remove"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">pinia/nuxt/types</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span></span>
<span class="line diff add"><span style="color:#393A34;">    </span><span style="color:#B56959AA;">&quot;</span><span style="color:#B56959;">@pinia/nuxt</span><span style="color:#B56959AA;">&quot;</span><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#999999;">]</span></span>
<span class="line"><span style="color:#999999;">}</span></span>
<span class="line"></span></code></pre></div><p>It is also recommended to give <a href="./../ssr/nuxt.html">the dedicated Nuxt section</a> a read.</p>`,40),e=[o];function t(c,r,i,y,d,F){return n(),a("div",null,e)}const h=s(p,[["render",t]]);export{A as __pageData,h as default};
